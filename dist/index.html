<div><script type="@plotdb/block">var mod;module.exports={pkg:{name:"radar",version:"0.0.1",extend:{name:"base",version:"0.0.1"},dependencies:[]},init:function(t){var a,r,e;a=t.root,r=t.context,e=t.pubsub;return e.fire("init",{mod:mod({context:r})}).then(function(t){return t[0]})}};mod=function(t){var a,o,r,e,n;a=t.context;o=a.d3,r=a.forceBoundary,e=a.ldColor,n=a.repeatString$;return{sample:function(){return{raw:[0,1,2,3,4].map(function(t){return{val:[0,1,2].map(function(){return.5+.5*Math.random()}),cat:t}}),binding:{radius:{key:"val"},order:{key:"cat"}}}},config:{},dimension:{radius:{type:"R",name:"radius of point on radar line"},order:{type:"R",name:"order of data point"}},init:function(){var t,a,r=this;t=o.select(this.svg);this.gs=a={};a.all=t.append("g");return this.line=o.line().x(function(t,a){return r.scale.r(t)*Math.cos(r.scale.a(r.orders[a]))}).y(function(t,a){return r.scale.r(t)*-Math.sin(r.scale.a(r.orders[a]))})},parse:function(){this.orders=Array.from(new Set(this.data.map(function(t){return t.order})));this.parsed=o.transpose(this.data.map(function(t){return t.radius}));this.parsed.map(function(t,a){return t.idx=a});this.names=["1","2","3"];this.radiusRange=o.extent(this.parsed.map(function(t){return o.extent(t)}).reduce(function(t,a){return t.concat(a)},[]));if(this.radiusRange[0]===this.radiusRange[1]){return this.radiusRange[1]++}},bind:function(){var t,a;t=this.gs.all.selectAll("path.data").data(this.parsed);t.exit().attr("class","").transition("exit").duration(500).attr("opacity",0).remove();t.enter().append("path").attr("class","data").attr("opacity",0);a=this.gs.all.selectAll("g.data-group").data(this.parsed);a.exit().attr("class","").transition("exit").duration(500).attr("opacity",0).remove();a.enter().append("g").attr("class","data-group").attr("opacity",0);return this.gs.all.selectAll("g.data-group").each(function(t,a){var r;r=o.select(this).selectAll("circle.node").data(t);r.exit().attr("class","").transition("exit").duration(500).attr("opacity",0).remove();r.enter().append("circle").attr("class","node").attr("opacity",0);return r})},resize:function(){var t,a;t=(a=Math.min(this.box.width,this.box.height)/2)>10?a:10;this.scale={r:o.scaleLinear().domain([0,this.radiusRange[1]]).range([0,t]),a:o.scalePoint().domain(this.orders).range([0,2*Math.PI]),c:o.interpolateTurbo};if(this.cfg!=null&&this.cfg.palette){this.scale.c=o.interpolateDiscrete(this.cfg.palette.colors.map(function(t){return e.web(t.value||t)}))}return this.aTicks=o.range(this.data.length)},render:function(){var e,n,i,s;e=this.scale,n=this.names,i=this.line,s=this.orders,s=this.orders;this.gs.all.attr("transform","translate("+this.box.width/2+","+this.box.height/2+")");this.gs.all.selectAll("path.data").each(function(t,a){var r;r=e.c(a/(n.length-1));return o.select(this).attr("fill",r).attr("fill-opacity",.2).attr("stroke",r).attr("stroke-width",1).transition("morph").duration(350).attr("d",function(t,a){return i(t,a)+"Z"})}).transition("opacity").duration(350).attr("opacity",1);return this.gs.all.selectAll("g.data-group").each(function(t,a){var r;r=e.c(a/(n.length-1));return o.select(this).selectAll("circle.node").attr("fill","#fff").attr("stroke",r).attr("stroke-width",1).transition("morph").duration(350).attr("cx",function(t,a){return e.r(t)*Math.cos(e.a(s[a]))}).attr("cy",function(t,a){return e.r(t)*-Math.sin(e.a(s[a]))}).attr("r",3).attr("opacity",1)}).transition("opacity").duration(350).attr("opacity",1)}}};</script></div>